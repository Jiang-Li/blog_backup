---
title: Commenly-used Script
author: ''
date: '2018-02-06'
---

```{r setup, echo = FALSE, warning = FALSE, message = FALSE}
library(knitr)
library(tidyverse)
library(feather)
# opts_chunk$set(engine.path = '/Library/Frameworks/Python.framework/Versions/3.6/bin/python3')
```

I often use R, Python, SAS, SQL, and Bash in different
tasks at the same time. To make the transfer easier, here a list of the commonly-used script was built for a quick reference.

At the beginning, a data set with missing and duplicated values were simulated. This data set was also saved to the feather format, which can be consumed by
Python, too.

```{r}
set.seed(1)
N <- 1000
df <- tibble(
dimension1 = sample(c("I", "II", "III"), N, replace = T),
dimension2 = sample(c("A", "B", "C"), N, replace = T),
measure1 = sample(1:10, N, replace = T),
measure2 = sample(1:10, N, replace = T)
)

df <- as_tibble(lapply(df, function(r) r[sample(c(TRUE, NA), prob = c(0.85, 0.15), size = length(r), replace = TRUE) ]))

library(feather)
path <- "my_data.feather"
write_feather(df, path)
```

## row count, column names and data types

### R

```{r}
nrow(df)
df %>% count()
names(df)
lapply(df, class)
```


### Python
```{python}
import feather
path = 'my_data.feather'
df = feather.read_dataframe(path)
print(df.shape[0])
print(list(df))
print(df.dtypes)
```


### SAS
```
PROC CONTENTS DATA=df;
RUN;
```

### SQL
```{sql, eval=FALSE}
SELECT COUNT(*) FROM df

SELECT TOP 0 * FROM df
  
SELECT * FROM INFORMATION_SCHEMA.COLUMNS  
```

### Bash

```{bash, eval=FALSE}
wc -l < filename

head -1 filename
```

## Missing Value

1. Count by column
2. Drop
  + row with missing values
  + row with all missing values
  + column with all missing values
3. Fill
  + data frame
  + column

### R

```{r}
colSums(is.na(df))

```

```{r}
no_missing <- na.omit(df)
colSums(is.na(no_missing))
no_all_row_missing <- df[rowSums(is.na(df)) < ncol(df), ]
no_all_col_missing <- df <- df[,colSums(is.na(df)) < nrow(df)]

```

```{r}
fill_missing <- df %>%
  replace(., is.na(.), 0)

fill_col_missing <- df %>%
  replace_na(list(dimension1 = "Unknown", measure1 = 0))
```

### Python

```{python}
import feather
import pandas as pd
path = 'my_data.feather'
df = feather.read_dataframe(path)
print(df.isnull().sum())

no_missing = df.dropna()
no_all_row_missing = df.dropna(how="all")
no_all_col_missing = df.dropna(axis=1, how='all')
```

## Unique

1. Unique row & drop the duplicate
2. Unique per variables & drop the duplicate


### R

```{r}
colnames(df)

unique(df$Species)
df %>% distinct(Species)

df %>% distinct() %>% count()

dup <- df[duplicated(df),]
df <- df %>% distinct()

```

## Frequency

one and two variables


## Aggregation


## Merge


## Reshape

